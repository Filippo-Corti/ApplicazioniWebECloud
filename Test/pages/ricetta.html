<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prova di HTML</title>
    <link rel="icon" type="image/png" sizes="32x32" href="../img/logo.png">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Protest+Strike&display=swap" rel="stylesheet">
    <!-- Stili -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../stili.css">
</head>

<body>

    <!-- NAVIGATION -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="../index.html">
                <img width="70" src="../img/logo.png" alt="">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active fs-3 font-protest" aria-current="page" href="#">Ricettario
                            Universitario</a>
                    </li>
                </ul>
                <div class="d-flex justify-content-center">
                    <form class="d-flex w-75" role="search">
                        <input type="text" class="form-control" id="floatingInput" placeholder="Cerca una Ricetta">
                        <button class="btn btn-dark ms-1" type="submit">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>
                    </form>
                    <button class="btn btn-dark ms-3" type="submit">Login</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid my-1">
        <ul class="nav justify-content-center gap-3 fs-5">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    Categorie
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Categoria 1</a></li>
                    <li><a class="dropdown-item" href="#">Categoria 2</a></li>
                    <li><a class="dropdown-item" href="#">Categoria 3</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    Aree
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Area 1</a></li>
                    <li><a class="dropdown-item" href="#">Area 2</a></li>
                    <li><a class="dropdown-item" href="#">Area 3</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="#">Ricette Salvate</a>
            </li>
        </ul>
    </div>
    <hr class="mt-0">

    <div class="container my-5">
        <h1 id="ricetta_nome" class="font-protest">SPAGHETTI</h1>
        <img id="ricetta_img" class="stretched-img w-100"
            src="https://www.themealdb.com/images/media/meals/sutysw1468247559.jpg" alt="">
        <div class="m-5">
            <h3 class="text-center">INGREDIENTI</h3>
            <div id="ricetta_ingredienti-container" class="my-5 row justify-content-around">
                <div
                    class="ricetta_ingrediente d-none col-4 d-flex justify-content-start align-items-center gap-3 my-2">
                    <img class="ricetta_ingrediente-img" width="50"
                        src="https://www.themealdb.com/images/ingredients/onions.png" alt="">
                    <p class="ricetta_ingrediente-nome m-0">Ingredient Name</p>
                </div>
            </div>
        </div>
        <div class="m-5">
            <h3 class="text-center">PROCEDIMENTO</h3>
            <div class="mt-4">
                <p id="ricetta_procedimento">Put the onion and oil in a large pan and fry over a fairly high heat for
                    3-4 mins.
                    Add the garlic and mince and fry until they both brown.
                    Add the mushrooms and herbs, and cook for another couple of mins.
                    Stir in the tomatoes, beef stock, tomato ketchup or pur√©e, Worcestershire sauce and seasoning.
                    Bring to the boil, then reduce the heat, cover and simmer, stirring occasionally, for 30 mins.
                    Meanwhile, cook the spaghetti in a large pan of boiling, salted water, according to packet
                    instructions.
                    Drain well, run hot water through it, put it back in the pan and add a dash of olive oil, if you
                    like, then stir in the meat sauce.
                    Serve in hot bowls and hand round Parmesan cheese, for sprinkling on top.</p>
            </div>
        </div>
    </div>


    <!-- CONSIGLI -->
    <div class="container my-5">
        <h2 class="font-protest">SCELTI PER VOI</h2>
        <!-- 10 PIATTI PER LA STESSA CATEGORIA -->
        <div class="mx-5">
            <h4 class="my-3">Altre Ricette della Categoria "<span id="nome-categoria">NomeCategoria</span>"</h4>
            <div id="category-slider" class="overflow-x-auto d-flex gap-1">
                <a class="category-card text-decoration-none d-none" href="pages/ricetta.html?id=000">
                    <div class="card flex-shrink-0" style="width: 16rem;">
                        <img src="https://www.themealdb.com/images/media/meals/sutysw1468247559.jpg"
                            class="card_img card-img-top" alt="...">
                        <h5 class="card_name card-title text-center my-3">Spaghetti</h5>
                    </div>
                </a>
            </div>
        </div>
        <!-- 10 PIATTI PER LA STESSA AREA -->
        <div class="mx-5">
            <h4 class="my-3">Altre Ricette dell'Area "<span id="nome-area">NomeArea</span>"</h4>
            <div id="area-slider" class="overflow-x-auto d-flex gap-1">
                <a class="area-card text-decoration-none d-none" href="pages/ricetta.html?id=000">
                    <div class="card flex-shrink-0" style="width: 16rem;">
                        <img src="https://www.themealdb.com/images/media/meals/sutysw1468247559.jpg"
                            class="card_img card-img-top" alt="...">
                        <h5 class="card_name card-title text-center my-3">Spaghetti</h5>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <script src="../script.js"></script>
    <script>

        var parametri = new URLSearchParams(window.location.search);
        var id = parametri.get("id");

        getDettagliRicetta(id).then((ricetta) => {
            //Aggiunta Descrizioni Generali
            document.getElementById("ricetta_nome").innerHTML = ricetta.strMeal;
            document.getElementById("ricetta_img").src = ricetta.strMealThumb;
            document.getElementById("ricetta_procedimento").innerHTML = ricetta.strInstructions;

            //Aggiunta Ingredienti
            var ingredienti_container = document.getElementById("ricetta_ingredienti-container");
            var ingrediente_layout = ingredienti_container.firstElementChild;

            for (var i = 1; i <= 20; i++) {

                var ingredient_name = ricetta["strIngredient" + i];
                var ingredient_measure = ricetta["strMeasure" + i];
                if (ingredient_name) {
                    var new_ingrediente = ingrediente_layout.cloneNode(true);
                    new_ingrediente.classList.remove("d-none");
                    new_ingrediente.getElementsByClassName("ricetta_ingrediente-img")[0].src = "https://www.themealdb.com/images/ingredients/" + ingredient_name + "-Small.png";
                    new_ingrediente.getElementsByClassName("ricetta_ingrediente-nome")[0].innerHTML = ingredient_measure + " - " + ingredient_name;
                    ingredienti_container.appendChild(new_ingrediente);
                }
            }

            //Aggiunta dei Consigliati (Area e Categoria)
            var categoria = ricetta.strCategory;
            document.getElementById("nome-categoria").innerHTML = categoria;
            var category_container = document.getElementById("category-slider");
            var category_card_layout = category_container.getElementsByClassName("category-card")[0];

            getRicetteByCategoria(categoria).then((data) => {
                var ricette = data.ricette;

                for (var i = 0; i < 10; i++) {
                    var new_category_card = category_card_layout.cloneNode(true);
                    new_category_card.classList.remove("d-none");
                    new_category_card.href = "pages/ricetta.html?id=" + ricette[i].idMeal;
                    new_category_card.getElementsByClassName("card_img")[0].src = ricette[i].strMealThumb;
                    new_category_card.getElementsByClassName("card_name")[0].innerHTML = ricette[i].strMeal;
                    category_container.appendChild(new_category_card);
                }
            })

            var area = ricetta.strArea;
            document.getElementById("nome-area").innerHTML = area;
            var area_container = document.getElementById("area-slider");
            var area_card_layout = area_container.getElementsByClassName("area-card")[0];

            getRicetteByArea(area).then((data) => {
                var ricette = data.ricette;

                for (var i = 0; i < 10; i++) {
                    var new_area_card = category_card_layout.cloneNode(true);
                    new_area_card.classList.remove("d-none");
                    new_area_card.href = "pages/ricetta.html?id=" + ricette[i].idMeal;
                    new_area_card.getElementsByClassName("card_img")[0].src = ricette[i].strMealThumb;
                    new_area_card.getElementsByClassName("card_name")[0].innerHTML = ricette[i].strMeal;
                    area_container.appendChild(new_area_card);
                }
            })



        });

    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>

</body>

</html>